<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breast Cancer Prediction System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header>
            <h1>ü©∫ Breast Cancer Prediction System</h1>
            <p class="subtitle">Machine Learning-Based Tumor Classification</p>
        </header>

        <div class="info-section">
            <h2>About This System</h2>
            <p>This system uses a trained Logistic Regression model to predict whether a breast tumor is <strong>Benign</strong> or <strong>Malignant</strong> based on five key features from diagnostic measurements.</p>
        </div>

        <div class="form-container">
            <h2>Enter Tumor Features</h2>
            <form id="predictionForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="mean radius">Mean Radius:</label>
                        <input type="number" id="mean radius" name="mean radius" step="0.01" required placeholder="e.g., 14.5">
                        <span class="hint">Typical range: 6-28</span>
                    </div>

                    <div class="form-group">
                        <label for="mean texture">Mean Texture:</label>
                        <input type="number" id="mean texture" name="mean texture" step="0.01" required placeholder="e.g., 19.5">
                        <span class="hint">Typical range: 9-40</span>
                    </div>

                    <div class="form-group">
                        <label for="mean perimeter">Mean Perimeter:</label>
                        <input type="number" id="mean perimeter" name="mean perimeter" step="0.01" required placeholder="e.g., 91.5">
                        <span class="hint">Typical range: 43-188</span>
                    </div>

                    <div class="form-group">
                        <label for="mean area">Mean Area:</label>
                        <input type="number" id="mean area" name="mean area" step="0.01" required placeholder="e.g., 654.5">
                        <span class="hint">Typical range: 143-2500</span>
                    </div>

                    <div class="form-group">
                        <label for="mean smoothness">Mean Smoothness:</label>
                        <input type="number" id="mean smoothness" name="mean smoothness" step="0.0001" required placeholder="e.g., 0.096">
                        <span class="hint">Typical range: 0.05-0.16</span>
                    </div>
                </div>

                <button type="submit" class="submit-btn">Predict Tumor Type</button>
            </form>
        </div>

        <div id="result" class="result-container" style="display: none;">
            <h2>Prediction Result</h2>
            <div id="resultContent"></div>
        </div>

        <footer>
            <p>Breast Cancer Prediction System | Powered by Machine Learning</p>
            <p class="disclaimer">‚ö†Ô∏è Disclaimer: This is a demonstration system for educational purposes only. Always consult healthcare professionals for medical diagnosis.</p>
        </footer>
    </div>

    <script>
        document.getElementById('predictionForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const formData = new FormData(this);
            const submitBtn = document.querySelector('.submit-btn');
            const resultDiv = document.getElementById('result');
            const resultContent = document.getElementById('resultContent');
            
            // Disable submit button and show loading
            submitBtn.disabled = true;
            submitBtn.textContent = 'Predicting...';
            
            try {
                const response = await fetch('/predict', {
                    method: 'POST',
                    body: formData
                });
                
                const data = await response.json();
                
                if (data.error) {
                    resultContent.innerHTML = `
                        <div class="error">
                            <h3>‚ùå Error</h3>
                            <p>${data.error}</p>
                        </div>
                    `;
                } else {
                    const predictionClass = data.prediction === 'Benign' ? 'benign' : 'malignant';
                    resultContent.innerHTML = `
                        <div class="prediction ${predictionClass}">
                            <h3>Prediction: ${data.prediction}</h3>
                            <p class="confidence">Confidence: ${data.confidence}%</p>
                            <div class="prediction-icon">
                                ${data.prediction === 'Benign' ? '‚úÖ' : '‚ö†Ô∏è'}
                            </div>
                        </div>
                        <div class="input-summary">
                            <h4>Input Values:</h4>
                            <ul>
                                ${Object.entries(data.input_features).map(([key, value]) => 
                                    `<li><strong>${key}:</strong> ${value}</li>`
                                ).join('')}
                            </ul>
                        </div>
                    `;
                }
                
                resultDiv.style.display = 'block';
                resultDiv.scrollIntoView({ behavior: 'smooth' });
                
            } catch (error) {
                resultContent.innerHTML = `
                    <div class="error">
                        <h3>‚ùå Error</h3>
                        <p>Failed to connect to the server. Please try again.</p>
                    </div>
                `;
                resultDiv.style.display = 'block';
            } finally {
                // Re-enable submit button
                submitBtn.disabled = false;
                submitBtn.textContent = 'Predict Tumor Type';
            }
        });
    </script>
</body>
</html>
